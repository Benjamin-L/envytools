TOC

0. Introduction


= Introduction =

falcon is a class of general-purpose microprocessor units, used in multiple
instances on nvidia GPUs starting from NV98. Originally developed as the
controlling logic for VP3 video decoding engines as a replacement for xtensa
used on VP2, it was later used in many other places, whenever a microprocessor
of some sort was needed.

A single falcon unit is made of:

 - the core microprocessor with its code and data SRAM [see falcon/proc.txt]
 - an IO space containing control registers of all subunits, accessible from
   the host as well as from the code running on the falcon microprocessor [see
   falcon/io.txt]
 - common support logic:
   - interrupt controller [see falcon/intr.txt]
   - periodic and watchdog timers [see falcon/timer.txt]
   - scratch registers for communication with host [see falcon/io.txt]
   - PCOUNTER signal output [see falcon/perf.txt]
   - some unknown other stuff [XXX]
 - optionally, FIFO interface logic, for falcon units used as PFIFO engines and
   some others [see falcon/fifo.txt]
 - optionally, common memory interface logic [see falcon/memif.txt]. However,
   some engines have their own type of memory interface.
 - optionally, a cryptographic AES coprocessor. A falcon unit with such
   coprocessor is called a "secretful" unit. [see falcon/crypt.txt]
 - any unit-specific logic the microprocessor is supposed to control

The base falcon hardware comes in three different revisions:

 - version 0: used on NV98, NVAA, NVAC
 - version 3: used on NVA3+, adds a crude VM system for the code segment,
   edge/level interrupt modes, new instructions [division, software traps,
   bitfield manipulation, ...], and other features
 - version 4: used on NVD9+ for some engines [others are still version 3]:
   adds support for 24-bit code addressing and [XXX: figure out what else]

The falcon units present on nvidia cards are:

 - The VP3/VP4/VP5 engines [NV98 and NVAA+]:
  - PBSP, the bitstream processor			[vdec/vp3/pbsp.txt]
  - PVP, the video processor				[vdec/vp3/pvp.txt]
  - PPPP, the video processor				[vdec/vp3/pppp.txt]
 - The VP3 cryptographic engine [NV98, NVAA, NVAC]:
  - PCRYPT, the cryptographic engine			[vdec/vp3/pcrypt.txt]
 - The NVA3:NVE4 copy engines:
  - PCOPY0 [NVA3:NVE4]					[fifo/pcopy.txt]
  - PCOPY1 [NVC0:NVE4]					[fifo/pcopy.txt]
 - The NVA3+ daemon engines:
  - PDAEMON [NVA3+]					[pm/pdaemon.txt]
  - PDISPLAY.DAEMON [NVD9+]				[display/nv50/pdisplay-daemon.txt]
 - The NVC0 PGRAPH CTXCTL engines:
  - PGRAPH.CTXCTL					[graph/nvc0-ctxctl/intro.txt]
  - PGRAPH.GPC[*].CTXCTL				[graph/nvc0-ctxctl/intro.txt]
 - The video compositing engine, PVCOMP [NVAF:NVC0]	[vdec/pvcomp.txt]
 - The unknown NVD9 PUNK1C3 engine [XXX]		[display/nv50/punk1c3.txt]
 - The H.264 encoding engine, PVENC [NVE4+]		[vdec/pvenc.txt]
